<!DOCTYPE html>
<html>
<head>
	<!-- META -->
	<title>MameBlock.js - Javascript library for visual code editing.</title>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	<meta name="description" content="" />
	
	<!-- CSS -->
	<link rel="stylesheet" type="text/css" href="css/kickstart.css" media="all" />
	<link rel="stylesheet" type="text/css" href="css/style.css" media="all" />
	<link rel="stylesheet" type="text/css" href="css/modal.css" media="all" />
	<link rel="stylesheet" type="text/css" href="css/mameblock.css" media="all" />
	<link rel="stylesheet" type="text/css" href="css/highlight_default.css" media="all" />
	
</head>
<body>
	<div class="grid">
		<div class="col_12" style="margin-top:60px;">
			<h1>MameBlock.js</h1>
			<p >MameBlock.js is Javascript library for visual code editing.<br />
			This is working in progress.</p>
			<p><a href="https://github.com/ycatch/mameblock.js" target="_blank">Github</a></p>
		</div>
		<div class="col_12">
			<h2>Example</h2>
			
			<ul class="button-bar">
				<li><a class="first" rel="mameEdit" href="#modal-window">Edit</a></li>
				<li><a class="last" href="">Run</a></li>
			</ul>
			<p></p>
			<pre>
				<code class="js" id="example_1"></code>
			</pre>

		</div>
		<div class="col_12" id="footer">
			Copyright 2015 Yutaka Kachi All Rights Reserved.
		</div>
	</div> <!-- End Grid -->

    <div id="modal-window">
		<a class="modal_close" href="#">[close]</a>
		<div id="loading_area">Edit Area is here.</div>
    </div>

	<!-- Javascript -->
	<script type="text/javascript" src="js/jquery-1.11.2.min.js"></script>
	<script type="text/javascript" src="js/jquery.leanModal.min.js"></script>
	<script type="text/javascript" src="js/jquery-sortable.js"></script>
	<script type="text/javascript" src="js/soramame.block.js"></script>
	<script type="text/javascript" src="js/beautify.js"></script>
	<script type="text/javascript" src="js/highlight.pack.js"></script>	
	<script type="text/javascript">
		$("#loading_area").load("mameBlock_template.html #mame_template", function(data) {
			if(data == null){
				$("#loading_area").append("[Error]:read template"); 
			} else {
				$('ol.pallet-code').sortable({
					group: 'connect-area',
					drop: false,
					onDragStart: function (item, container, _super) {
						// Duplicate items of the no drop area
						if(!container.options.drop) {
							item.clone(true).insertAfter(item)
						}
						_super(item);
					},
				});

				$('ol.block').sortable({
					group: 'connect-area',
				});

				$('ol.trash-code').sortable({
					group: 'connect-area',
				});

				MAME_BLOCK.setSerializeBlock();
			}
		});

		$(function() {
			$("a[rel*=mameEdit]").leanModal({
				top: 10,
				overlay : 0.4,
				closeButton: ".modal_close"
			});
			
			$(window).on('open:leanModal', function() {
				$("#modal-window").css("top", $(window).scrollTop());
			})

			$(window).on('close:leanModal', function() {
				MAME_BLOCK.setSerializeBlock();
			})
		});

	</script>

</body>
</html>
